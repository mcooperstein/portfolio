!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.ScrollReveal=t()}(this,function(e,t,i){return function(){"use strict";var e,t,i;this.ScrollReveal=function(){function n(i){return void 0===this||Object.getPrototypeOf(this)!==n.prototype?new n(i):((e=this).tools=new t,e.isSupported()?(e.tools.extend(e.defaults,i||{}),o(e.defaults),e.store={elements:{},containers:[]},e.sequences={},e.history=[],e.uid=0,e.initialized=!1):"undefined"!=typeof console&&console,e)}function o(t){var i=t.container;return i&&"string"==typeof i?t.container=window.document.querySelector(i):(i&&!e.tools.isNode(i)&&(t.container=null),null==i&&(t.container=window.document.documentElement),t.container)}function r(){return++e.uid}function s(e,t){var i=e.config;return"-webkit-transition: "+e.styles.computed.transition+"-webkit-transform "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s, opacity "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s; transition: "+e.styles.computed.transition+"transform "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s, opacity "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s; "}function a(e){var t=e.config,i=e.styles.transform;parseInt(t.distance)&&(i.initial+=" translate"+t.axis+"("+t.distance+")",i.target+=" translate"+t.axis+"(0)"),t.scale&&(i.initial+=" scale("+t.scale+")",i.target+=" scale(1)"),t.rotate.x&&(i.initial+=" rotateX("+t.rotate.x+"deg)",i.target+=" rotateX(0)"),t.rotate.y&&(i.initial+=" rotateY("+t.rotate.y+"deg)",i.target+=" rotateY(0)"),t.rotate.z&&(i.initial+=" rotateZ("+t.rotate.z+"deg)",i.target+=" rotateZ(0)"),i.initial+="; opacity: "+t.opacity+";",i.target+="; opacity: "+e.styles.computed.opacity+";"}function l(){if(e.isSupported()){d();for(var t=0;t<e.store.containers.length;t++)e.store.containers[t].addEventListener("scroll",c),e.store.containers[t].addEventListener("resize",c);e.initialized||(window.addEventListener("scroll",c),window.addEventListener("resize",c),e.initialized=!0)}return e}function c(){i(d)}function d(){var t,i,n,o,r,s;e.tools.forOwn(e.sequences,function(t){s=e.sequences[t],n=!1;for(var i=0;i<s.elemIds.length;i++)r=s.elemIds[i],o=e.store.elements[r],y(o)&&!n&&(n=!0);s.active=n}),e.tools.forOwn(e.store.elements,function(n){var o,r,s,a,l,d,u;i=e.store.elements[n],u=(d=i).config.useDelay,t="always"===u||"onload"===u&&!e.initialized||"once"===u&&!d.seen,function(t){if(t.sequence){var i=e.sequences[t.sequence.id];return i.active&&!i.blocked&&!t.revealing&&!t.disabled}return y(t)&&!t.revealing&&!t.disabled}(i)?(t?i.domEl.setAttribute("style",i.styles.inline+i.styles.transform.target+i.styles.transition.delayed):i.domEl.setAttribute("style",i.styles.inline+i.styles.transform.target+i.styles.transition.instant),f("reveal",i,t),i.revealing=!0,i.seen=!0,i.sequence&&(o=i,r=t,s=0,a=0,(l=e.sequences[o.sequence.id]).blocked=!0,r&&"onload"==o.config.useDelay&&(a=o.config.delay),o.sequence.timer&&(s=Math.abs(o.sequence.timer.started-new Date),window.clearTimeout(o.sequence.timer)),o.sequence.timer={started:new Date},o.sequence.timer.clock=window.setTimeout(function(){l.blocked=!1,o.sequence.timer=null,c()},Math.abs(l.interval)+a-s))):function(t){if(t.sequence){var i=e.sequences[t.sequence.id];return!i.active&&t.config.reset&&t.revealing&&!t.disabled}return!y(t)&&t.config.reset&&t.revealing&&!t.disabled}(i)&&(i.domEl.setAttribute("style",i.styles.inline+i.styles.transform.initial+i.styles.transition.instant),f("reset",i),i.revealing=!1)})}function f(e,t,i){var n=0,o=0,r="after";switch(e){case"reveal":o=t.config.duration,i&&(o+=t.config.delay),r+="Reveal";break;case"reset":o=t.config.duration,r+="Reset"}t.timer&&(n=Math.abs(t.timer.started-new Date),window.clearTimeout(t.timer.clock)),t.timer={started:new Date},t.timer.clock=window.setTimeout(function(){t.config[r](t.domEl),t.timer=null},o-n)}function u(e){var t=0,i=0,n=e.offsetHeight,o=e.offsetWidth;do{isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(i+=e.offsetLeft)}while(e=e.offsetParent);return{top:t,left:i,height:n,width:o}}function y(e){var t,i,n,o,r,s,a,l,c,d=u(e.domEl),f={width:(t=e.config.container).clientWidth,height:t.clientHeight},y=function(e){if(e&&e!==window.document.documentElement){var t=u(e);return{x:e.scrollLeft+t.left,y:e.scrollTop+t.top}}return{x:window.pageXOffset,y:window.pageYOffset}}(e.config.container),m=e.config.viewFactor,g=d.height,p=d.width,w=d.top,v=d.left;return i=w+g*m,n=v+p*m,o=w+g-g*m,r=v+p-p*m,s=y.y+e.config.viewOffset.top,a=y.x+e.config.viewOffset.left,l=y.y-e.config.viewOffset.bottom+f.height,c=y.x-e.config.viewOffset.right+f.width,l>i&&o>s&&n>a&&c>r||"fixed"===window.getComputedStyle(e.domEl).position}return n.prototype.defaults={origin:"bottom",distance:"20px",duration:500,delay:0,rotate:{x:0,y:0,z:0},opacity:0,scale:.9,easing:"cubic-bezier(0.6, 0.2, 0.1, 1)",container:null,mobile:!0,reset:!1,useDelay:"always",viewFactor:.2,viewOffset:{top:0,right:0,bottom:0,left:0},afterReveal:function(e){},afterReset:function(e){}},n.prototype.isSupported=function(){var e=document.documentElement.style;return"WebkitTransition"in e&&"WebkitTransform"in e||"transition"in e&&"transform"in e},n.prototype.reveal=function(t,i,n,c){var d,f,u,y,m,g,p,w,v,b,h,x,q,E;if(d=i&&i.container?o(i):e.defaults.container,!(f=e.tools.isNode(t)?[t]:Array.prototype.slice.call(d.querySelectorAll(t))).length)return e;i&&"number"==typeof i&&(n=i,i={}),n&&"number"==typeof n&&(g=r(),m=e.sequences[g]={id:g,interval:n,elemIds:[],active:!1});for(var O=0;O<f.length;O++)y=f[O].getAttribute("data-sr-id"),y?u=e.store.elements[y]:(u={id:r(),domEl:f[O],seen:!1,revealing:!1},u.domEl.setAttribute("data-sr-id",u.id)),m&&(u.sequence={id:m.id,index:m.elemIds.length},m.elemIds.push(u.id)),h=u,x=i||{},h.config?h.config=e.tools.extendClone(h.config,x):h.config=e.tools.extendClone(e.defaults,x),"top"===h.config.origin||"bottom"===h.config.origin?h.config.axis="Y":h.config.axis="X","top"!==h.config.origin&&"left"!==h.config.origin||(h.config.distance="-"+h.config.distance),v=u,void 0,b=window.getComputedStyle(v.domEl),v.styles||(v.styles={transition:{},transform:{},computed:{}},v.styles.inline=v.domEl.getAttribute("style")||"",v.styles.inline+="; visibility: visible; ",v.styles.computed.opacity=b.opacity,b.transition&&"all 0s ease 0s"!=b.transition?v.styles.computed.transition=b.transition+", ":v.styles.computed.transition=""),v.styles.transition.instant=s(v,0),v.styles.transition.delayed=s(v,v.config.delay),v.styles.transform.initial=" -webkit-transform:",v.styles.transform.target=" -webkit-transform:",a(v),v.styles.transform.initial+="transform:",v.styles.transform.target+="transform:",a(v),p=u,void 0,w=p.config.container,w&&-1==e.store.containers.indexOf(w)&&e.store.containers.push(p.config.container),e.store.elements[p.id]=p,e.tools.isMobile()&&!u.config.mobile||!e.isSupported()?(u.domEl.setAttribute("style",u.styles.inline),u.disabled=!0):u.revealing||u.domEl.setAttribute("style",u.styles.inline+u.styles.transform.initial);return!c&&e.isSupported()&&(E={selector:t,config:i,interval:q},e.history.push(E),e.initTimeout&&window.clearTimeout(e.initTimeout),e.initTimeout=window.setTimeout(l,0)),e},n.prototype.sync=function(){if(e.history.length&&e.isSupported()){for(var t=0;t<e.history.length;t++){var i=e.history[t];e.reveal(i.selector,i.config,i.interval,!0)}l()}return e},n}(),t=function(){function e(){}return e.prototype.isObject=function(e){return null!==e&&"object"==typeof e&&e.constructor==Object},e.prototype.isNode=function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},e.prototype.forOwn=function(e,t){if(!this.isObject(e))throw new TypeError('Expected "object", but received "'+typeof e+'".');for(var i in e)e.hasOwnProperty(i)&&t(i)},e.prototype.extend=function(e,t){return this.forOwn(t,function(i){this.isObject(t[i])?(e[i]&&this.isObject(e[i])||(e[i]={}),this.extend(e[i],t[i])):e[i]=t[i]}.bind(this)),e},e.prototype.extendClone=function(e,t){return this.extend(this.extend({},e),t)},e.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},e}(),i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}.call(this),this.ScrollReveal});
